# 英语单词卡片生成器 MVP 需求文档

> **版本 v1.3 — 2024-06-30**
> **🎯 MVP完成度：100% | 核心功能已全部实现并交付**

## 🚀 **项目最终交付状态**

### **✅ 已完成的核心功能（100%）**
- **用户输入系统**：支持手动输入和CSV文件批量上传。
- **智能补全系统**：集成 AI (OpenRouter) 和本地词典，自动补全单词信息。
- **卡片预览系统**：实时预览卡片正反面，支持分页。
- **PDF导出系统**：支持一键生成可打印的 A4、2x2 布局的单词卡片 PDF 文件。
- **API控制系统**：包含成本控制、智能缓存和实时用量监控。
- **字体系统**：成功嵌入手写体、中文字体、音标字体，确保跨平台显示一致。

---

## 1. 项目背景与目标

为中国小学生的家长和老师，提供一款“一键生成+打印”的网页工具，旨在解决手动制作高质量单词卡片耗时耗力、内容不规范、图文不统一的核心痛点。

- **目标用户**：中国小学阶段英语学习者的家长和老师。
- **核心价值**：快速、高效、专业地生成可直接打印使用的单词学习卡片。

---

## 2. 核心功能需求

### F1: 数据输入
- **F1.1**: 支持通过文本框手动输入多个单词。
- **F1.2**: 支持上传 CSV 文件进行批量单词导入。
- **F1.3**: 提供“生成示例数据”按钮，便于用户快速体验产品。

### F2: 智能补全
- **F2.1**: 对于用户输入的单词，系统需自动补全所有卡片需要的字段。
- **F2.2**: **补全逻辑**: 优先查询本地词典，若缺失则调用AI (OpenRouter) 进行补全，并将结果缓存至用户本地词典。
- **F2.3**: **补全字段**:
    - `ipa`: 国际音标
    - `meaningCn`: 中文释义 (含词性)
    - `sentenceEn`: 英文例句
    - `sentenceCn`: 例句的中文翻译
    - `phonics`: 基于 Oxford Phonics 规则的拼读拆分
    - `imageUrl`: 来自 Pexels API 的高质量配图

### F3: 卡片预览
- **F3.1**: 在网页上实时预览生成的单词卡片。
- **F3.2**: 预览区采用 2x2 网格布局，支持分页浏览所有卡片。
- **F3.3**: 每张卡片都支持点击翻转，以预览其正面和反面。

### F4: PDF 导出
- **F4.1**: 用户可一键将所有生成的卡片导出为单个 PDF 文件。
- **F4.2**: **PDF 格式**: A4 页面，每页包含 2x2 排列的4张卡片。
- **F4.3**: **卡片尺寸**: 严格遵循 85mm x 120mm 的标准尺寸。
- **F4.4**: **字体嵌入**: PDF 必须嵌入所有特殊字体（手写体、中文、音标），确保在任何设备上打印的效果都与预览一致。
- **F4.5**: PDF 中的文本必须是可选、可复制的，禁止使用图片替代文本。

---

## 3. 卡片内容与设计要求

### 卡片正面
- **图片区域**: 展示与单词匹配的高质量图片 (`imageUrl`)。
- **单词区域**:
  - `word`: 使用专业的“四线三格”教学手写体 (AU School Handwriting Fonts)。
  - `ipa`: 单词的国际音标。
  - `phonics`: 彩色块状区分的单词拼读拆分。

### 卡片反面
- `meaningCn`: 单词的中文释义及词性。
- `sentenceEn` & `sentenceCn`: 中英双语例句。

---

## 4. 非功能性要求
- **性能**: PDF 生成过程应在合理时间内完成（50个单词在10秒以内）。
- **兼容性**: 优先确保在桌面端的 Chrome, Edge, Safari 最新版本浏览器上功能正常。
- **成本**: API调用需有成本控制机制，避免滥用。

