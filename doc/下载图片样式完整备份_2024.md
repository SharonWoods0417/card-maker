# 下载图片样式完整备份 (2024年最新版)

> **重要说明：** 本文档是下载图片模式的完整CSS样式备份，用于快速恢复图片导出效果

## 📅 备份信息
- **创建日期：** 2024年12月最新版本
- **适用范围：** 下载图片模式 (`.print-mode`)
- **状态：** ✅ 已验证正常工作
- **成功配置：** 拼读色块文字上提效果 + 中文释义位置优化
- **最新更新：** 序号字体大小与间距精细化调整完成

## 🎯 核心样式配置

### 1. 四线三格配置
```css
.print-mode .four-line-grid {
  position: relative !important;
  background-color: transparent !important;
  padding: 20px 16px !important; /* 增加上下内边距，给单词更多对齐空间 */
  margin-top: 8px !important; /* 恢复到备份文档中的成功配置 */
}
```

### 2. 四线三格线条配置
```css
.print-mode .four-line-grid::before {
  /* 增强伪元素的显示效果 */
  content: '' !important;
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  pointer-events: none !important;
  z-index: 1 !important;
  background: 
    /* 第一条虚线 (20%) */
    linear-gradient(90deg, #4b5563 0px, #4b5563 10px, transparent 10px, transparent 14px) 0 20%/14px 1.5px repeat-x,
    /* 第二条虚线 (40%) */
    linear-gradient(90deg, #4b5563 0px, #4b5563 10px, transparent 10px, transparent 14px) 0 40%/14px 1.5px repeat-x,
    /* 红色基线 (60%) */
    linear-gradient(90deg, #dc2626 0px, #dc2626 10px, transparent 10px, transparent 14px) 0 60%/14px 2px repeat-x,
    /* 第四条虚线 (80%) */
    linear-gradient(90deg, #4b5563 0px, #4b5563 10px, transparent 10px, transparent 14px) 0 80%/14px 1.5px repeat-x !important;
}
```

### 3. 四线三格字体配置
```css
.print-mode .four-line-font-md {
  font-size: 48px !important; /* 调整为48px */
  line-height: 1 !important; /* 保持与基础版本一致 */
  font-family: "AU School Handwriting Fonts", "Kalam", sans-serif !important;
  transform: translateY(-30%) !important; /* 恢复到备份文档中的成功配置 */
  font-weight: 450 !important; /* 调整字重为450 */
  letter-spacing: 0.05em !important;
  color: #1f2937 !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) !important;
  z-index: 15 !important; /* 确保字体在四线三格之上 */
  position: relative !important;
}
```

### 4. 音标配置
```css
.print-mode .phonetic-text {
  font-size: 25px !important; /* 1.25rem */
  font-family: "Nunito", sans-serif !important;
  margin-top: -5px !important; /* 更大的负上边距，使音标明显上移 */
  margin-bottom: 8px !important; /* 调整下边距 */
  transform: translateY(-5px) !important; /* 双重调整：transform + margin */
  position: relative !important;
  top: -10px !important; /* 第三重调整：top定位 */
}
```

### 5. 拼读色块容器配置
```css
.print-mode .phonics-container {
  margin-top: 8px !important; /* 恢复原来的位置 */
  margin-bottom: 0px !important;
}
```

### 6. 拼读色块样式配置 (核心成功要素)
```css
.print-mode .phonics-block {
  font-size: 28px !important; /* 字体大小28px */
  line-height: 0.7 !important; /* 适中的行高，避免过度紧凑 */
  font-family: "AU School Handwriting Fonts", "Kalam", sans-serif !important;
  padding: 0px 12px 28px 12px !important; /* 增加水平padding，让色块更宽 */
  display: flex !important; /* 使用flex精确控制 */
  align-items: flex-start !important; /* 文字严格对齐到顶部 */
  justify-content: center !important; /* 水平居中 */
  position: relative !important;
  min-height: 50px !important; /* 进一步增加色块高度到50px */
  height: auto !important; /* 让高度自适应，但不小于min-height */
  box-shadow: none !important;
  /* 不移动整个色块，专注于内部文字位置 */
  transform: none !important; /* 完全不移动色块 */
  margin-top: 0px !important; /* 不使用负边距 */
  /* 强制覆盖所有nth-child背景色为实色 */
}
```

**核心技术原理：**
- 增大色块高度（min-height: 50px）创造调整空间
- 上边距0px + 下边距28px强制文字向上挤压
- align-items: flex-start确保文字对齐到顶部
- 不移动整个色块（transform: none），专注内部调整

### 7. 拼读色块颜色配置 (80%透明度)
```css
.print-mode .phonics-block:nth-child(1) {
  background-color: rgba(147, 197, 253, 0.8) !important; /* 蓝色80%透明度 */
  color: #1e40af !important;
}
.print-mode .phonics-block:nth-child(2) {
  background-color: rgba(252, 165, 165, 0.8) !important; /* 红色80%透明度 */
  color: #dc2626 !important;
}
.print-mode .phonics-block:nth-child(3) {
  background-color: rgba(110, 231, 183, 0.8) !important; /* 绿色80%透明度 */
  color: #059669 !important;
}
.print-mode .phonics-block:nth-child(4) {
  background-color: rgba(251, 191, 36, 0.8) !important; /* 黄色80%透明度 */
  color: #d97706 !important;
}
.print-mode .phonics-block:nth-child(5) {
  background-color: rgba(196, 181, 253, 0.8) !important; /* 紫色80%透明度 */
  color: #7c3aed !important;
}
.print-mode .phonics-block:nth-child(6) {
  background-color: rgba(103, 232, 249, 0.8) !important; /* 青色80%透明度 */
  color: #0891b2 !important;
}
.print-mode .phonics-block:nth-child(7) {
  background-color: rgba(167, 243, 208, 0.8) !important; /* 绿色80%透明度 */
  color: #65a30d !important;
}
.print-mode .phonics-block:nth-child(8) {
  background-color: rgba(253, 186, 116, 0.8) !important; /* 橙色80%透明度 */
  color: #ea580c !important;
}
```

## 🔄 卡片背面样式

### 中文释义配置 (关键优化)
```css
.print-mode .meaning-text {
  font-size: 24px !important; /* 1.5rem */
  line-height: 1.3 !important;
  font-family: "PingFang SC", "Microsoft YaHei", sans-serif !important;
  margin-top: -10px !important; /* 下载图片模式下上移中文释义，增大与下方例句的间距 */
}
```

### 例句样式配置 (2024年最新版)
```css
/* 基础例句样式 - 影响下载图片的字体大小 */
.print-mode .sentence-english {
  font-size: 21.6px !important; /* 在24px基础上减小10% */
  line-height: 1.4 !important;
  font-family: "Nunito", sans-serif !important;
  color: #333 !important;
}

.print-mode .sentence-chinese {
  font-size: 19.8px !important; /* 在22px基础上减小10% */
  line-height: 1.4 !important;
  font-family: "PingFang SC", "Microsoft YaHei", sans-serif !important;
  color: #555 !important;
}
```

### 序号样式配置 (最新优化)
```css
.print-mode .sentence-number {
  font-size: 20px !important; /* 略小于例句文字，保持协调 */
  padding-right: 12px !important; /* 间距增大到12px */
  font-family: "Nunito", sans-serif !important;
  color: #333 !important;
}
```

## 🖼️ 打印模式基础配置

### 容器配置
```css
.print-mode.a4-page-container {
  /* 强制固定尺寸，避免任何变形 */
  width: 794px !important;
  height: 1123px !important;
  min-width: 794px !important;
  min-height: 1123px !important;
  max-width: 794px !important;
  max-height: 1123px !important;
  /* 移除任何可能的变换 */
  transform: none !important;
  /* 确保正确的字体族 */
  font-family: "AU School Handwriting Fonts", "Kalam", "Comic Neue", "Comic Sans MS", sans-serif !important;
  background: white !important;
  /* 完全移除阴影、边框和边距，确保纯净的打印效果 */
  box-shadow: none !important;
  border: none !important;
  margin: 0 !important;
  padding: 0 !important;
  /* 确保没有任何圆角或其他装饰 */
  border-radius: 0 !important;
  /* 移除任何可能的轮廓或其他视觉效果 */
  outline: none !important;
}
```

### 卡片配置
```css
.print-mode .word-card {
  /* 确保卡片固定尺寸 */
  width: 321px !important;
  height: 453px !important;
  /* 移除变换和动效 */
  transform: none !important;
  transition: none !important;
  animation: none !important;
  /* 确保边框和背景稳定 */
  border: 1px solid #d1d5db !important;
  background: white !important;
}
```

### 动效禁用配置
```css
.print-mode,
.print-mode * {
  /* 禁用所有过渡动画和变换效果 */
  transition: none !important;
  animation: none !important;
  /* 确保字体正确渲染 */
  -webkit-font-smoothing: auto !important;
  -moz-osx-font-smoothing: auto !important;
  /* 禁用任何可能影响布局的属性 */
  will-change: auto !important;
  backface-visibility: visible !important;
}
```

### 字体强制配置
```css
.print-mode .four-line-font,
.print-mode .four-line-font-md,
.print-mode .four-line-grid .four-line-font,
.print-mode .four-line-grid .four-line-font-md {
  font-family: "AU School Handwriting Fonts" !important;
  /* 移除所有备用字体，强制使用嵌入字体 */
  font-weight: 700 !important;
  font-style: normal !important;
}
```

## 🚀 快速恢复步骤

如果下载图片效果被破坏，按以下步骤恢复：

1. 打开 `src/index.css` 文件
2. 定位到打印模式相关样式 (搜索 `.print-mode`)
3. 将本文档中的对应样式配置完全替换原有配置
4. 保存文件，测试下载图片功能验证效果

## ⚠️ 重要注意事项

1. **只影响下载图片**：所有样式都使用 `.print-mode` 前缀
2. **不影响网页预览**：网页预览使用独立的 `.preview-mode` 样式
3. **强制优先级**：所有CSS规则都使用 `!important` 确保生效
4. **字体兼容性**：确保 AU School Handwriting Fonts 字体文件正确加载
5. **拼读色块核心**：上移文字的padding配置是关键成功要素
6. **序号配置**：序号字体大小和间距已优化，与例句文字协调

## 📋 完整配置验证清单

### ✅ 正面布局验证
- [ ] 四线三格位置和线条显示正确
- [ ] 单词字体使用手写体，大小48px，位置适中
- [ ] 音标颜色蓝色，大小25px，位置上移
- [ ] 拼读色块高度50px，文字上提到顶部
- [ ] 拼读色块颜色80%透明度，文字颜色对比清晰

### ✅ 背面布局验证
- [ ] 中文释义字体24px，位置上移10px
- [ ] 英文例句字体21.6px，字族Nunito
- [ ] 中文翻译字体19.8px，字族中文字体栈
- [ ] 序号字体20px，右边距12px
- [ ] 例句容器背景色和圆角正确

### ✅ 导出质量验证
- [ ] html2canvas截图清晰度符合预期
- [ ] 所有字体在导出图片中正确显示
- [ ] 颜色和透明度在图片中准确还原
- [ ] A4页面尺寸794×1123px正确

## 🔧 故障排除指南

### 问题1：拼读色块文字位置不正确
**解决方案：**
1. 检查 `padding: 0px 12px 28px 12px` 配置
2. 确认 `align-items: flex-start` 生效
3. 验证 `min-height: 50px` 正确设置

### 问题2：例句字号在图片中显示异常
**解决方案：**
1. 确认`.print-mode .sentence-english`样式生效
2. 检查字号21.6px/19.8px配置正确
3. 验证序号字号20px与间距12px设置

### 问题3：中文释义位置不理想
**解决方案：**
1. 检查 `margin-top: -10px` 配置生效
2. 确认字号24px设置正确
3. 验证与例句框间距合理

### 问题4：导出图片模糊或失真
**解决方案：**
1. 确认html2canvas配置 `scale: 2`
2. 检查A4容器尺寸794×1123px
3. 验证所有字体正确加载

## 📊 技术参数总结

### 关键尺寸参数
- **A4页面**：794×1123px (96dpi)
- **拼读色块高度**：50px (最小高度)
- **拼读色块字体**：28px
- **例句英文字体**：21.6px
- **例句中文字体**：19.8px
- **序号字体**：20px
- **序号间距**：12px

### 关键技术要素
- **拼读色块上移**：通过padding下边距28px实现
- **字体渲染**：强制使用目标字体栈
- **透明度配置**：拼读色块80%，确保打印效果
- **对齐精度**：序号与例句基线对齐

---

**最后更新：** 2024年12月最新版本  
**验证状态：** ✅ 所有样式已验证正常工作  
**特别优化：** 序号字体大小与间距精细化调整完成

**备注：** 本备份文档与实际CSS代码完全同步，可用于快速恢复下载图片效果。任何样式修改都应该同时更新本文档，确保备份的准确性。 